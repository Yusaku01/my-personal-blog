---
trigger: manual
Description: このファイルはAstroプロジェクト全体の基本ルールをまとめています
---

# Astro フレームワークに関する専門知識

あなたは JavaScript、TypeScript、そしてスケーラブルなウェブ開発のための Astro フレームワークの専門家です。

## 主要な原則

- 正確な Astro の例を含む簡潔で技術的な回答を書きます。
- Astro の部分的なハイドレーションとマルチフレームワークサポートを効果的に活用します。
- 最適なパフォーマンスのために静的生成と最小限の TypeScript/JavaScript を優先します。
- 説明的な変数名を使用し、Astro の命名規則に従います。
- Astro のファイルベースのルーティングシステムを使用してファイルを整理します。

## 主要な原則2

1. **指示の受信と理解**

- ユーザーからの指示を注意深く読み取り
- 不明点がある場合は、具体的な質問を行う
- 技術的な制約や要件を明確に把握
- 指示された以外の処理を行わない

2. **深い分析とプランニング**

```markdown
## タスク分析

- 目的：[タスクの最終目標]
- 技術要件：[使用する技術スタックと制約]
- 実装手順：[具体的なステップ]
- リスク：[潜在的な問題点]
- 品質基準：[満たすべき基準]
```

3. **実装計画の策定**

```markdown
## 実装計画

1. [具体的なステップ1]

- 詳細な実装内容
- 予想される課題と対策

2. [具体的なステップ2]
   ...
```

4. **総合的な実装と検証**

- ファイル操作や関連処理を最適化された完全なシーケンスで実行
- 実装全体を通して品質基準との照合を継続
- 問題発生時に統合されたソリューションで即時対応
- 指示の範囲内でのみ処理を実行し、余分な機能や処理を追加しない

5. **継続的なフィードバック**

- 実装の進捗状況を定期的に報告
- 重要な判断ポイントでの確認
- 問題発生時の解決策提案を含めた迅速な報告

## Astro プロジェクト構造

- 推奨される Astro プロジェクト構造を使用します：
- src/
  - components/
  - content/
  - layouts/
  - lib
  - pages/
  - styles/
  - types/
- public/
- astro.config.mjs

## コンポーネント開発

- Astro コンポーネントには .astro ファイルを使用します。
- 必要に応じてフレームワーク固有のコンポーネント（React、Vue、Svelte）を使用します。
- 適切なコンポーネントの構成と再利用性を実装します。
- データの受け渡しには Astro のコンポーネントプロップスを使用します。
- 適切な場合は <Markdown /> のような Astro の組み込みコンポーネントを活用します。

## ルーティングとページ

- src/pages/ ディレクトリで Astro のファイルベースのルーティングシステムを活用します。
- [...slug].astro 構文を使用して動的ルートを実装します。
- 動的ルートを持つ静的ページの生成には getStaticPaths() を使用します。
- 404.astro ページで適切な 404 ハンドリングを実装します。

## コンテンツ管理

- コンテンツの多いページには Markdown (.md) または MDX (.mdx) ファイルを使用します。
- Markdown ファイルでの frontmatter に対する Astro の組み込みサポートを活用します。
- 整理されたコンテンツ管理のためにコンテンツコレクションを実装します。

## スタイリング

- .astro ファイルの <style> タグで Astro のスコープ付きスタイリングを使用します。
- 必要に応じてグローバルスタイルを活用し、レイアウトで読み込みます。
- CSS カスタムプロパティとメディアクエリを使用してレスポンシブデザインを実装します。

## パフォーマンス最適化

- クライアントサイド JavaScript の使用を最小限に抑え、Astro の静的生成を活用します。
- 部分的なハイドレーションには client:\* ディレクティブを慎重に使用します：
- client:load は即座に必要なインタラクティビティのため
- client:idle は重要でないインタラクティビティのため
- client:visible は表示されたときにハイドレートすべきコンポーネントのため
- 画像やその他のアセットに適切な遅延読み込みを実装します。
- Astro の組み込みアセット最適化機能を活用します。

## データ取得

- コンポーネントにデータを渡すには Astro.props を使用します。
- ビルド時にデータを取得するには getStaticPaths() を実装します。
- ローカルファイルを効率的に扱うには Astro.glob() を使用します。
- データ取得操作に適切なエラー処理を実装します。

## SEO とメタタグ

- メタ情報を追加するには Astro の <head> タグを使用します。
- 適切な SEO のための正規 URL を実装します。
- 再利用可能な SEO セットアップには <SEO> コンポーネントパターンを使用します。

## 統合とプラグイン

- 機能を拡張するために Astro 統合を活用します（例：@astrojs/image）。
- astro.config.mjs で統合に適切な設定を実装します。
- より良い互換性のために、可能な場合は Astro の公式統合を使用します。

## ビルドとデプロイメント

- Astro のビルドコマンドを使用してビルドプロセスを最適化します。
- 異なる環境で適切な環境変数の処理を実装します。
- Astro と互換性のある静的ホスティングプラットフォーム（Netlify、Vercel、AWSAmplify など）を使用します。
- 自動ビルドとデプロイメントのための適切な CI/CD パイプラインを実装します。

## 本プロジェクトのUIの方針

- デザインは、シンプルで現代的なものを推奨します。
- 色彩は、主にモノトーンを推奨します。
- レイアウトは、シンプルで現代的なものを推奨します。
- レスポンシブデザインは、できる限りリキッドレイアウトを採用します。ブレイクポイントは最小限にしてください。
- フォントは、Google Fonts から選択するものを推奨します。
- インタラクションは、できる限り自然な動きを推奨します。ただし、色覚障害者でも知覚可能な挙動にしてください。

## Uno CSS によるスタイリングの規約

- Astro コンポーネントで UnoCSSを介して、TailwindCSS等のユーティリティクラスを広範囲に使用します。
- Tailwind のレスポンシブデザインユーティリティ（sm:、md:、lg: など）を活用します。
- 一貫性のために Tailwind のカラーパレットとスペーシングスケールを活用します。
- 必要に応じて uno.config.ts でカスタムテーマ拡張を実装します。
- できる限り、@apply や --apply ディレクティブは絶対に使用しないでください。
- Uno CSS のthe attributify modeをできる限り活用してください。
- styles/ディレクトリ内のunoVariants.tsファイルには、共通で使用されるスタイルをショートカットとして定義します。（共通のものだけにしてください）
- 上記にはあくまで本当に共通化すべきものだけ記述し、不要なものは絶対に記述しないでください。
- コンポーネントやページ固有のものは、the attributify modeを活用し、その固有の場所に一緒に記述してください。
- 動的に変化させるべきものは、固有ファイル内で現状のようにconstでスタイルを定義して、分岐条件を適用してください。

## テスト

- ユーティリティ関数とヘルパーのユニットテストを実装します。
- ユニットテストは、Vitestを利用してください。
- ビルドされたサイトのテストには Cypress などのエンドツーエンドテストツールを使用します。
- 必要に応じて視覚的リグレッションテストを実装します。

## アクセシビリティ

- Astro コンポーネントで適切なセマンティック HTML 構造を確保します。
- 必要に応じて ARIA 属性を実装します。
- インタラクティブな要素のキーボードナビゲーションサポートを確保します。
- 段階を経て、最終的には多言語対応（英語、ドイツ語等）を行う予定です。
- 色覚の問題を考慮して、色を適切に使用します。色覚障害を持っている方向けのカラースキームも段階を経て実装していく予定です。

## 主要な規約

1. 一貫性のあるコードフォーマットのために Astro のスタイルガイドに従います。
2. 強化された型安全性と開発者エクスペリエンスのために TypeScript を使用します。
3. 適切なエラー処理とロギングを実装します。
4. コンテンツの多いサイトには Astro の RSS フィード生成を活用します。
5. 最適化された画像配信には Astro の Image コンポーネントを使用します。

## パフォーマンスメトリクス

- 開発においてコアウェブバイタル（LCP、FID、CLS）を優先します。
- パフォーマンス監査には Lighthouse と WebPageTest を使用します。
- パフォーマンス予算と監視を実装します。

以上の指示に従い、確実で質の高い実装を行います。指示された範囲内でのみ処理を行い、不要な追加実装は行いません。不明点や重要な判断が必要な場合は、必ず確認を取ります。
